"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}
/*!
 * @copyright 2017- Commenthol
 * @license
 */Object.defineProperty(exports,"__esModule",{value:!0});var R_NAME=/([a-zA-Z_$][a-zA-Z_$0-9]{0,50})/,R_NAME_REPLACE=new RegExp("\\$\\+{".concat(R_NAME.source,"}"),"g"),R_NAMED_BACKREF=new RegExp("^[?:]&".concat(R_NAME.source)),R_GROUP=new RegExp("^[?:]<".concat(R_NAME.source,">([^]*)")),R_GROUPS=/([\\]?[()])/g,R_EMPTY_GROUPS=/\(\)/g;function generate(e,t){var r={},n={};(e=e||"")instanceof RegExp&&((t=t||e.flags||"")||(e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.global&&(t+="g")),e=e.source);var o={count:0,groups:[""],names:[]},s=0,u=e.split(R_GROUPS);return{source:u.map((function(e,t){var a,c;switch(e){case"(":o.groups.push(""),o.names.push("");break;case")":c=o.groups.pop(),(a=o.names.pop())&&(n[a]=c.substr(1));break;default:"("===u[t-1]&&!/^\?[:!=]/.test(e)&&(s++,(a=R_GROUP.exec(e))&&a[1]?(r[a[1]]?r[o.count++]=s:(o.names[o.names.length-1]=a[1],r[a[1]]=s),e=a[2]||"",")"!==u[t+1]||a[2]||(e="[^]+")):r[o.count++]=s,(a=R_NAMED_BACKREF.exec(e))&&a[1]&&(e=n[a[1]]||""))}return o.groups=o.groups.map((function(t){return t+e})),e})).join("").replace(R_EMPTY_GROUPS,""),flags:t,groups:r,named:n}}var NamedRegExp=function(){function e(t,r){_classCallCheck(this,e);var n=generate(t,r);this.regex=new RegExp(n.source,n.flags),this.source=this.regex.source,this.groups=n.groups}return _createClass(e,[{key:"exec",value:function(e){var t=this,r=this.regex.exec(e);return r&&(r.groups={},Object.keys(this.groups).forEach((function(e){r.groups[e]=r[t.groups[e]]}))),r}},{key:"test",value:function(e){return this.regex.test(e)}},{key:"toString",value:function(){return this.regex.toString()}},{key:Symbol.replace,value:function(e,t){var r=this,n=t;switch(_typeof(n)){case"string":n=n.replace(R_NAME_REPLACE,(function(e,t){var n=r.groups[t];return null==n?"":"$"+r.groups[t]}));break;case"function":n=t.bind(this);break;default:return String(n)}return e.replace(this.regex,n)}},{key:Symbol.match,value:function(e){return this.exec(e)}},{key:Symbol.split,value:function(e){return e.split(this.regex)}},{key:Symbol.search,value:function(e){return e.search(this.regex)}}]),e}();exports.default=NamedRegExp,module.exports=exports.default;
